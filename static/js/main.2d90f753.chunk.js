(this["webpackJsonpsystem-rezerwacji-react"]=this["webpackJsonpsystem-rezerwacji-react"]||[]).push([[0],{414:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(82),c=n.n(r),o=n(7),s=n(67),l=n(71),d=(n(343),n(25)),b=n(20),u={id:0,firstName:"",lastName:"",phone:"",role:"",email:"",token:""},m=Object(a.createContext)({user:u,setUser:function(e){}}),j=m,p=n(77),h=n(5),g=function(e){var t=e.to,n=e.children,a=e.marginRight,i=void 0===a?13:a,r=e.disableActiveStyles,c=e.exact,o=void 0===c||c;return Object(h.b)(p.c,{style:{marginRight:i},to:t,activeStyle:r?{}:{fontWeight:"bold",color:"white",textUnderlineOffset:6,textDecoration:"underline"},css:{transform:"var(--tw-transform)",":hover":{"--tw-scale-x":"1.1","--tw-scale-y":"1.1",transform:"var(--tw-transform)"},transitionDuration:"250ms"},exact:o,children:n})},O=n(40),f=n(299),v=n(75),w=n(103),x=n.n(w),y=n(222),k=function(){var e=Object(a.useContext)(j);return Object(h.b)(x.a,{variant:"popover",popupId:"demo-popup-menu",children:function(t){return Object(h.c)(h.a,{children:[Object(h.b)(y.a,Object(O.a)({name:e.user.firstName+" "+e.user.lastName,size:"25",css:{marginRight:"0.5rem",":hover":{"--tw-scale-x":"1.1","--tw-scale-y":"1.1",transform:"var(--tw-transform)"},cursor:"pointer"},round:!0},Object(w.bindTrigger)(t))),Object(h.b)(f.a,Object(O.a)(Object(O.a)({},Object(w.bindMenu)(t)),{},{children:Object(h.b)(g,{marginRight:0,to:"/logout",children:Object(h.b)(v.a,{children:"Wyloguj"})})}))]})}})},S=function(e){var t=e.children;return Object(h.b)(x.a,{variant:"popover",popupId:"demo-popup-menu",children:function(e){return Object(h.c)(h.a,{children:[Object(h.b)("p",Object(O.a)(Object(O.a)({css:{transform:"var(--tw-transform)",":hover":{"--tw-scale-x":"1.1","--tw-scale-y":"1.1",transform:"var(--tw-transform)"},transitionDuration:"250ms",cursor:"pointer"}},Object(w.bindTrigger)(e)),{},{children:"Panel"})),Object(h.b)(f.a,Object(O.a)(Object(O.a)({},Object(w.bindMenu)(e)),{},{children:t}))]})}})};var z=function(){var e=Object(a.useContext)(j);return Object(h.c)("div",{children:[Object(h.b)("div",{style:{fontFamily:"Allerta Stencil"},css:{"--tw-bg-opacity":"1",backgroundColor:"rgba(30, 64, 175, var(--tw-bg-opacity))","--tw-text-opacity":"1",color:"rgba(255, 255, 255, var(--tw-text-opacity))",fontSize:"30px",paddingTop:"1.25rem",paddingBottom:"1.25rem",paddingLeft:"0.75rem",paddingRight:"0.75rem",textAlign:"center"},children:"SYSTEM REZERWACJI TERMIN\xd3W WIZYT"}),Object(h.c)("div",{css:{"--tw-bg-opacity":"1",backgroundColor:"rgba(30, 64, 175, var(--tw-bg-opacity))","--tw-text-opacity":"1",color:"rgba(255, 255, 255, var(--tw-text-opacity))",paddingBottom:"1.25rem",paddingLeft:"0.75rem",paddingRight:"0.75rem",display:"flex",marginBottom:"1.25rem"},children:[Object(h.c)("div",{css:{display:"flex"},children:[Object(h.b)(g,{to:"/",children:"G\u0142\xf3wna"}),!e.user.firstName&&Object(h.b)(g,{to:"/register",children:"Rejestracja"}),e.user.firstName&&Object(h.b)(g,{to:"/specialists",children:"Specjali\u015bci"}),"client"===e.user.role&&Object(h.b)(g,{to:"/user-reservations",children:"Rezerwacje"})]}),"owner"===e.user.role&&Object(h.b)(S,{children:Object(h.c)(h.a,{children:[Object(h.b)(g,{disableActiveStyles:!0,marginRight:0,to:"/specialists-list",children:Object(h.b)(v.a,{children:"Lista specjalist\xf3w"})}),Object(h.b)(g,{disableActiveStyles:!0,marginRight:0,to:"/specialist-add",children:Object(h.b)(v.a,{children:"Dodaj specjalist\u0119"})})]})}),"specialist"===e.user.role&&Object(h.b)(S,{children:Object(h.c)(h.a,{children:[Object(h.b)(g,{disableActiveStyles:!0,marginRight:0,to:"/add-visit",children:Object(h.b)(v.a,{children:"Dodaj wizyt\u0119"})}),Object(h.b)(g,{disableActiveStyles:!0,marginRight:0,to:"/show-visits",children:Object(h.b)(v.a,{children:"Poka\u017c wizyty"})}),Object(h.b)(g,{disableActiveStyles:!0,marginRight:0,to:"/delete-visits",children:Object(h.b)(v.a,{children:"Usu\u0144 wizyty"})})]})}),Object(h.c)("div",{css:{display:"flex",marginLeft:"auto"},children:[e.user.firstName&&Object(h.b)(k,{}),!e.user.firstName&&Object(h.b)(g,{css:{display:"inline"},to:"/login",children:Object(h.b)("div",{css:{display:"flex"},children:"Login"})})]})]})]})};var C=function(){return localStorage.getItem("token"),Object(h.c)("div",{children:[Object(h.b)(z,{}),Object(h.b)("p",{css:{fontWeight:"700",textAlign:"center",fontSize:"1.5rem",lineHeight:"2rem",paddingBottom:"1.25rem"},children:"Aby zalogowa\u0107 si\u0119 do systemu, u\u017cyj nast\u0119puj\u0105cych danych:"}),Object(h.b)("p",{css:{paddingTop:"0.5rem",paddingLeft:"0.75rem",paddingRight:"0.75rem",fontWeight:"bold"},children:"Logowanie u\u017cytkownika 1:"}),Object(h.c)("ul",{css:{listStyleType:"disc"},children:[Object(h.b)("li",{css:{paddingTop:"0.5rem",paddingLeft:"1.25rem",paddingRight:"0.75rem"},children:"Login: januszex123@o2.pl "}),Object(h.b)("li",{css:{paddingTop:"0.5rem",paddingLeft:"1.25rem",paddingRight:"0.75rem"},children:"Has\u0142o: janusz123 "})]}),Object(h.b)("p",{css:{paddingTop:"0.5rem",paddingLeft:"0.75rem",paddingRight:"0.75rem",fontWeight:"bold"},children:"Logowanie u\u017cytkownika 2:"}),Object(h.c)("ul",{css:{listStyleType:"disc"},children:[Object(h.b)("li",{css:{paddingTop:"0.5rem",paddingLeft:"1.25rem",paddingRight:"0.75rem"},children:"Login: maniek@o2.pl"}),Object(h.b)("li",{css:{paddingTop:"0.5rem",paddingLeft:"1.25rem",paddingRight:"0.75rem"},children:"Has\u0142o: maniek123"})]}),Object(h.b)("p",{css:{paddingTop:"0.5rem",paddingLeft:"0.75rem",paddingRight:"0.75rem",fontWeight:"bold"},children:"Logowanie specialisty 1:"}),Object(h.c)("ul",{css:{listStyleType:"disc"},children:[Object(h.b)("li",{css:{paddingTop:"0.5rem",paddingLeft:"1.25rem",paddingRight:"0.75rem"},children:"Login: leszek@o2.pl"}),Object(h.b)("li",{css:{paddingTop:"0.5rem",paddingLeft:"1.25rem",paddingRight:"0.75rem"},children:"Has\u0142o: leszek123"})]}),Object(h.b)("p",{css:{paddingTop:"0.5rem",paddingLeft:"0.75rem",paddingRight:"0.75rem",fontWeight:"bold"},children:"Logowanie specialisty 2:"}),Object(h.c)("ul",{css:{listStyleType:"disc"},children:[Object(h.b)("li",{css:{paddingTop:"0.5rem",paddingLeft:"1.25rem",paddingRight:"0.75rem"},children:"Login: miros\u0142aw@o2.pl"}),Object(h.b)("li",{css:{paddingTop:"0.5rem",paddingLeft:"1.25rem",paddingRight:"0.75rem"},children:"Has\u0142o: mirek123"})]}),Object(h.b)("p",{css:{paddingTop:"0.5rem",paddingLeft:"0.75rem",paddingRight:"0.75rem",fontWeight:"bold"},children:"Logowanie administratora:"}),Object(h.c)("ul",{css:{listStyleType:"disc"},children:[Object(h.b)("li",{css:{paddingTop:"0.5rem",paddingLeft:"1.25rem",paddingRight:"0.75rem"},children:"Login: admin@o2.pl"}),Object(h.b)("li",{css:{paddingTop:"0.5rem",paddingLeft:"1.25rem",paddingRight:"0.75rem"},children:"Has\u0142o: admin123"})]})]})},N=n(498),R=n(116),W=n(229),T=n(504),D=n(500),H=n(506),A=n(175),L=n.n(A),I=n(194),M=n(505),E=n(298),Y=n(502),_=n(1);var B=function(e){return Object(_.jsxs)(I.a,Object(O.a)(Object(O.a)({variant:"body2",color:"text.secondary",align:"center"},e),{},{children:["Copyright \xa9 ",Object(_.jsx)(T.a,{color:"inherit",href:"/",children:"Kamil Por\u0119ba, Pawe\u0142 Szantula, Konrad \u017bak, Szymon Uzdowski"})," ",(new Date).getFullYear(),"."]}))},F=n(29),P=n.n(F),q=n(496),Q=n(489),U=Object(E.a)();function Z(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],i=t[1],r=Object(a.useState)("info"),c=Object(o.a)(r,2),s=c[0],l=c[1],u=Object(a.useState)("Pomy\u015blnie zarejestrowano."),m=Object(o.a)(u,2),p=m[0],h=m[1],g=Object(b.g)(),O=Object(a.useContext)(j),f=function(){i(!1)},v=Object(d.useMutation)((function(e){return P.a.post("/login",e)}),{onSuccess:function(e){var t=e.data;localStorage.setItem("token",t.token),localStorage.setItem("role",t.role.toString()),O.setUser(t),l("success"),i(!0),h("Logowanie pomy\u015blne."),g.push({pathname:"/specialists",state:{isSuccess:!0}})},onError:function(){l("error"),i(!0),h("B\u0142\u0119dne dane logowania.")}});return Object(_.jsx)(Y.a,{theme:U,children:Object(_.jsxs)(M.a,{component:"main",maxWidth:"xs",children:[Object(_.jsx)(q.a,{open:n,autoHideDuration:6e3,onClose:f,children:Object(_.jsx)(Q.a,{onClose:f,severity:s,sx:{width:"100%"},children:p})}),Object(_.jsxs)(H.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(_.jsx)(N.a,{sx:{m:1,bgcolor:"blue"},children:Object(_.jsx)(L.a,{htmlColor:"#FFFFFF"})}),Object(_.jsx)(I.a,{component:"h1",variant:"h5",children:"Zaloguj si\u0119"}),Object(_.jsxs)(H.a,{component:"form",onSubmit:function(e){var t,n;e.preventDefault();var a=new FormData(e.currentTarget);v.mutate({email:(null===(t=a.get("email"))||void 0===t?void 0:t.toString())||"",password:(null===(n=a.get("password"))||void 0===n?void 0:n.toString())||""})},noValidate:!0,sx:{mt:1},children:[Object(_.jsx)(W.a,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Adres email",name:"email",autoComplete:"email",autoFocus:!0}),Object(_.jsx)(W.a,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Has\u0142o",type:"password",id:"password",autoComplete:"current-password"}),Object(_.jsx)(R.a,{disabled:v.isLoading,type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2,backgroundColor:n&&"success"===s?"green":"blue"},children:"Zaloguj si\u0119"}),Object(_.jsx)(D.a,{container:!0,children:Object(_.jsx)(D.a,{item:!0,children:Object(_.jsx)(T.a,{href:"/register",variant:"body2",children:"Nie masz konta? Zarejestruj si\u0119"})})})]})]}),Object(_.jsx)(B,{sx:{mt:8,mb:4}})]})})}var J=function(){return Object(_.jsxs)("div",{children:[Object(_.jsx)(z,{}),Object(_.jsx)(Z,{})]})},K=function(){localStorage.setItem("token",""),localStorage.setItem("role","")},V=function(){K(),function(){var e=Object(a.useContext)(m);Object(a.useEffect)((function(){e.setUser(u)}),[])}();var e=Object(b.g)();return Object(a.useEffect)((function(){e.push("/")}),[]),Object(_.jsxs)("div",{children:[Object(_.jsx)(z,{}),Object(_.jsx)("p",{children:"You have been logged out."})]})},X=function(){var e=Object(a.useContext)(j);Object(a.useLayoutEffect)((function(){"owner"!==e.user.role&&(console.log("something is wrong"),window.location.href="http://localhost:3000/unauthorized")}),[])};var $=function(){return X(),Object(h.c)("div",{children:[Object(h.b)(z,{}),Object(h.b)("p",{css:{textAlign:"center",fontSize:"3rem",lineHeight:"1",fontWeight:"700"},children:"Owner"})]})};Object(E.a)();function G(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],i=t[1],r=Object(a.useState)("success"),c=Object(o.a)(r,2),s=c[0],l=c[1],u=Object(a.useState)("Pomy\u015blnie zarejestrowano."),m=Object(o.a)(u,2),p=m[0],h=m[1],g=Object(b.g)(),O=Object(a.useContext)(j),f=Object(a.useState)(!1),v=Object(o.a)(f,2),w=v[0],x=v[1],y=Object(a.useState)(!1),k=Object(o.a)(y,2),S=k[0],z=k[1],C=Object(a.useState)(!1),A=Object(o.a)(C,2),E=A[0],Y=A[1],F=Object(a.useState)(!1),U=Object(o.a)(F,2),Z=U[0],J=U[1],K=Object(a.useState)(!1),V=Object(o.a)(K,2),X=V[0],$=V[1],G=Object(a.useState)(!1),ee=Object(o.a)(G,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(""),ie=Object(o.a)(ae,2),re=ie[0],ce=ie[1],oe=Object(a.useState)(""),se=Object(o.a)(oe,2),le=(se[0],se[1]),de=Object(a.useState)(""),be=Object(o.a)(de,2),ue=be[0],me=be[1],je=Object(a.useState)(""),pe=Object(o.a)(je,2),he=pe[0],ge=pe[1],Oe=Object(a.useState)(""),fe=Object(o.a)(Oe,2),ve=fe[0],we=fe[1],xe=Object(a.useState)(""),ye=Object(o.a)(xe,2),ke=ye[0],Se=ye[1],ze=function(e){var t,n,a,i,r,c;x(!1),z(!1),Y(!1),J(!1),ne(!1),$(!1),ce(""),le(""),me(""),ge(""),we(""),Se("");var o=(null===(t=e.get("email"))||void 0===t?void 0:t.toString())||"",s=(null===(n=e.get("password"))||void 0===n?void 0:n.toString())||"",l=(null===(a=e.get("passwordRepeated"))||void 0===a?void 0:a.toString())||"",d=(null===(i=e.get("firstName"))||void 0===i?void 0:i.toString())||"",b=(null===(r=e.get("lastName"))||void 0===r||r.toString(),(null===(c=e.get("telephone"))||void 0===c?void 0:c.toString())||"");return d.length<3?(x(!0),ce("Imi\u0119 musi zawiera\u0107 minimum 3 znaki")):d.length>30&&(x(!0),ce("Imi\u0119 musi zawiera\u0107 maksimum 30 znak\xf3w")),d.length<3?(z(!0),le("Nazwisko musi zawiera\u0107 minimum 3 znaki")):d.length>30&&(z(!0),le("Nazwisko musi zawiera\u0107 maksimum 30 znak\xf3w")),b.match(/^[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-\s\./0-9]*$/)||(Y(!0),me("Telefon musi by\u0107 prawid\u0142owy")),o.match(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)||(ne(!0),Se("Email musi by\u0107 prawid\u0142owy")),s.length<6&&(J(!0),$(!0),we("Has\u0142a musz\u0105 si\u0119 zgadza\u0107"),ge("Has\u0142o musi si\u0119 sk\u0142ada\u0107 z minimum 6 liter")),l!==s&&($(!0),we("Has\u0142a musz\u0105 si\u0119 zgadza\u0107")),!!(w||S||te||E||Z||X)},Ce=function(){i(!1)},Ne=Object(d.useMutation)((function(e){return P.a.post("http://localhost:3001/register",e)}),{onSuccess:function(e){localStorage.setItem("token",e.data.token),localStorage.setItem("role",e.data.role.toString()),O.setUser(e.data),l("success"),i(!0),h("Pomy\u015blnie utworzono u\u017cytkownika"),g.push("/specialists")},onError:function(e){switch(l("error"),i(!0),e.request.status){case 400:h("Wszystkie pola musz\u0105 by\u0107 wype\u0142nione");break;case 409:h("U\u017cytkownik o takim adresie email istnieje");break;default:h("Wyst\u0105pi\u0142 b\u0142\u0105d przy rejestracji")}}});return Object(_.jsxs)(M.a,{component:"main",maxWidth:"xs",children:[Object(_.jsx)(q.a,{open:n,autoHideDuration:6e3,onClose:Ce,children:Object(_.jsx)(Q.a,{onClose:Ce,severity:s,sx:{width:"100%"},children:p})}),Object(_.jsxs)(H.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(_.jsx)(N.a,{sx:{m:1,bgcolor:"blue"},children:Object(_.jsx)(L.a,{htmlColor:"#FFFFFF"})}),Object(_.jsx)(I.a,{component:"h1",variant:"h5",children:"Zarejestruj si\u0119"}),Object(_.jsxs)(H.a,{component:"form",noValidate:!0,onSubmit:function(e){e.preventDefault();var t,n,a,i,r,c=new FormData(e.currentTarget);ze(c)||Ne.mutate({email:(null===(t=c.get("email"))||void 0===t?void 0:t.toString())||"",password:(null===(n=c.get("password"))||void 0===n?void 0:n.toString())||"",firstName:(null===(a=c.get("firstName"))||void 0===a?void 0:a.toString())||"",lastName:(null===(i=c.get("lastName"))||void 0===i?void 0:i.toString())||"",phone:(null===(r=c.get("telephone"))||void 0===r?void 0:r.toString())||""})},sx:{mt:3},children:[Object(_.jsxs)(D.a,{container:!0,spacing:2,children:[Object(_.jsx)(D.a,{item:!0,xs:12,sm:6,children:Object(_.jsx)(W.a,{error:w,helperText:re,autoComplete:"given-name",name:"firstName",required:!0,fullWidth:!0,id:"firstName",label:"Imi\u0119",autoFocus:!0})}),Object(_.jsx)(D.a,{item:!0,xs:12,sm:6,children:Object(_.jsx)(W.a,{error:S,helperText:re,required:!0,fullWidth:!0,id:"lastName",label:"Nazwisko",name:"lastName",autoComplete:"family-name"})}),Object(_.jsx)(D.a,{item:!0,xs:12,children:Object(_.jsx)(W.a,{error:te,helperText:ke,required:!0,fullWidth:!0,id:"email",label:"Adres email",name:"email",autoComplete:"email"})}),Object(_.jsx)(D.a,{item:!0,xs:12,children:Object(_.jsx)(W.a,{error:E,helperText:ue,required:!0,fullWidth:!0,name:"telephone",label:"Telefon",id:"telephone"})}),Object(_.jsx)(D.a,{item:!0,xs:12,children:Object(_.jsx)(W.a,{error:Z,helperText:he,required:!0,fullWidth:!0,name:"password",label:"Has\u0142o",type:"password",id:"password"})}),Object(_.jsx)(D.a,{item:!0,xs:12,children:Object(_.jsx)(W.a,{error:X,helperText:ve,required:!0,fullWidth:!0,name:"passwordRepeated",label:"Has\u0142o powt\xf3rzone",type:"password",id:"passwordRepeated",autoComplete:"new-password"})})]}),Object(_.jsx)(R.a,{disabled:Ne.isLoading,type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2,backgroundColor:n&&"success"===s?"green":"blue"},children:"Zarejestruj si\u0119"}),Object(_.jsx)(D.a,{container:!0,justifyContent:"flex-start",children:Object(_.jsx)(T.a,{href:"/login",variant:"body2",children:"Masz ju\u017c konto? Zaloguj si\u0119"})})]})]}),Object(_.jsx)(B,{sx:{mt:5}})]})}var ee=function(){return Object(_.jsxs)("div",{style:{overflow:"auto"},children:[Object(_.jsx)(z,{}),Object(_.jsx)(G,{})]})},te=function(e){var t=e.marginHorizontal,n=void 0===t?16:t,a=e.children,i=void 0===a?null:a,r=e.marginBottom,c=void 0===r?16:r;return Object(_.jsx)("div",{style:{marginBottom:c,marginLeft:n/2,marginRight:n/2},children:i})},ne=n(509),ae=n(512),ie=n(511),re=n(510),ce=n.p+"static/media/doctor.fa5ce2a2.png",oe=n.p+"static/media/dentist.fa86359f.png",se=n.p+"static/media/vet.71e7dd65.jpg",le=function(e){switch(e){case"dentist":return{name:"Dentysta",img:oe};default:return{name:"Doktor",img:ce};case"vet":return{name:"Weterynarz",img:se}}},de=function(e){var t=e.firstName,n=e.lastName,i=e.job,r=e.id,c=e.proportion,o=void 0===c?1:c,s=Object(b.g)(),l=Object(a.useContext)(j);return Object(_.jsxs)(ne.a,{sx:{padding:0,maxWidth:200*o,marginLeft:"auto",marginRight:"auto"},children:[Object(_.jsx)(re.a,{component:"img",height:"150",width:"150",image:le(i).img,alt:"green iguana",sx:{maxWidth:200*o,maxHeight:200*o}}),Object(_.jsxs)(ie.a,{sx:{padding:1,marginBottom:0,"&:last-child":{paddingBottom:0}},children:[Object(_.jsx)(I.a,{gutterBottom:!0,variant:"h5",component:"div",children:t+" "+n}),Object(_.jsx)(I.a,{variant:"body2",color:"text.secondary",children:le(i).name}),Object(_.jsx)(ae.a,{children:"client"===l.user.role&&Object(_.jsx)(R.a,{size:"small",onClick:function(){return s.push({pathname:"/specialist-visits/".concat(r),state:{isSuccess:!0}})},children:"Rezerwuj Wizyt\u0119"})})]})]})},be=function(e){var t=e.data;return Object(h.b)(D.a,{container:!0,spacing:3,alignItems:"center",justifyContent:"center",children:null===t||void 0===t?void 0:t.map((function(e){return Object(h.b)(D.a,{item:!0,xs:4,md:3,lg:2,justifySelf:"center",children:Object(h.b)(de,{firstName:e.user.firstName,lastName:e.user.lastName,job:e.jobName,id:e.userId})},e.userId)}))})},ue=function(){var e=Object(d.useQuery)(["specialists"],(function(){return P.a.get("/specialists").then((function(e){return e.data}))})),t=e.data,n=e.isSuccess;return Object(h.b)("div",{children:n&&Object(h.c)(h.a,{children:[Object(h.b)(z,{}),Object(h.c)(te,{marginBottom:10,children:[Object(h.b)("p",{css:{textAlign:"center",fontSize:"1.875rem",lineHeight:"2.25rem",fontWeight:"700",paddingBottom:"2.5rem"},children:"Speciali\u015bci"}),Object(h.b)(be,{data:t})]})]})})},me=function(){return Object(_.jsxs)("div",{children:[Object(_.jsx)(z,{}),Object(_.jsx)("p",{children:"Unauthorized"})]})},je=n(491),pe=n(487),he=n(423),ge=n(488),Oe=n(490),fe=n(192),ve=n(31),we=n.n(ve);var xe=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],i=t[1],r=Object(a.useState)("success"),c=Object(o.a)(r,2),s=c[0],l=c[1],b=Object(a.useState)(""),u=Object(o.a)(b,2),m=u[0],j=u[1],p=Object(a.useState)(null),g=Object(o.a)(p,2),f=g[0],w=g[1],x=Object(a.useState)(null),y=Object(o.a)(x,2),k=y[0],S=y[1],C=Object(a.useState)(null),N=Object(o.a)(C,2),T=N[0],D=N[1],H=Object(a.useState)(null),A=Object(o.a)(H,2),L=A[0],I=A[1],M=Object(a.useState)(""),E=Object(o.a)(M,2),Y=E[0],_=E[1],B=Object(a.useState)(60),F=Object(o.a)(B,2),U=F[0],Z=F[1],J=Object(a.useState)(""),K=Object(o.a)(J,2),V=K[0],X=K[1],$=function(){i(!1)},G=Object(d.useMutation)((function(e){return P.a.post("/reservation-from-to",e)}),{onSuccess:function(e){var t=e.data;console.log(JSON.stringify(t)),l("success"),i(!0),j(t)},onError:function(e){console.log(e.response.data.msg),l("error"),i(!0),j(e.response.data.msg)}});return Object(h.c)("div",{children:[Object(h.b)(z,{}),Object(h.b)(q.a,{open:n,autoHideDuration:6e3,onClose:$,children:Object(h.b)(Q.a,{onClose:$,severity:s,sx:{width:"100%"},children:m})}),Object(h.b)("p",{css:{textAlign:"center",fontSize:"1.875rem",lineHeight:"2.25rem",fontWeight:"700",paddingBottom:"2.5rem"},children:"Dodawanie wizyty"}),Object(h.b)("div",{css:{paddingBottom:"0.5rem",marginLeft:"0.5rem",marginRight:"0.5rem"},children:Object(h.c)(he.b,{dateAdapter:pe.a,locale:ge.a,children:[Object(h.c)("div",{css:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",paddingLeft:"1rem",paddingRight:"1rem",paddingTop:"0.5rem",paddingBottom:"0.5rem"},children:[Object(h.b)("div",{css:{gridColumn:"span 2 / span 2",textAlign:"center",paddingBottom:"0.75rem"},children:Object(h.b)(W.a,{id:"outlined-basic",label:"Nazwa wizyty",variant:"outlined",value:Y,onChange:function(e){return _(e.target.value)}})}),Object(h.b)("div",{css:{paddingRight:"0.25rem",textAlign:"right"},children:Object(h.b)(je.a,{label:"Data pocz\u0105tkowa",minDate:new Date,value:f,onChange:function(e){w(e)},renderInput:function(e){return Object(h.b)(W.a,Object(O.a)({},e))}})}),Object(h.b)("div",{css:{paddingLeft:"0.25rem",textAlign:"left"},children:Object(h.b)(je.a,{label:"Data ko\u0144cowa",minDate:new Date,value:k,onChange:function(e){S(e)},renderInput:function(e){return Object(h.b)(W.a,Object(O.a)({},e))}})})]}),Object(h.c)("div",{css:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",paddingLeft:"1rem",paddingRight:"1rem",paddingTop:"1rem"},children:[Object(h.b)("div",{css:{paddingRight:"0.25rem",textAlign:"right"},children:Object(h.b)(Oe.a,{label:"Pocz\u0105tek wizyt",value:T,onChange:D,renderInput:function(e){return Object(h.b)(W.a,Object(O.a)({},e))}})}),Object(h.b)("div",{css:{paddingLeft:"0.25rem",textAlign:"left"},children:Object(h.b)(Oe.a,{label:"Koniec wizyt",value:L,onChange:I,renderInput:function(e){return Object(h.b)(W.a,Object(O.a)({},e))}})})]}),Object(h.b)("div",{css:{paddingTop:"1.25rem",textAlign:"center"},children:Object(h.c)(fe.a,{label:"Czas trwania [min]",value:U,onChange:function(e){return Z(parseInt(e.target.value.toString(),10))},children:[Object(h.b)(v.a,{value:30,children:"30 minut"}),Object(h.b)(v.a,{value:45,children:"45 minut"}),Object(h.b)(v.a,{value:60,children:"60 minut"})]})}),Object(h.c)("div",{css:{textAlign:"center"},children:[V&&Object(h.b)("p",{css:{"--tw-text-opacity":"1",color:"rgba(220, 38, 38, var(--tw-text-opacity))"},children:V}),Object(h.b)(R.a,{onClick:function(e){f&&k&&T&&L?we()(f)>=we()(k)?X("Data pocz\u0105tku wizyt musi by\u0107 p\xf3\u017aniejsza od daty ko\u0144ca wizyt."):we()(T)>we()(L)?X("Czas pocz\u0105tku wizyt musi by\u0107 p\xf3\u017aniejszy od czasu ko\u0144ca wizyt."):(X(""),G.mutate({name:Y,date_start:f,date_end:k,time_start:T,time_end:L,duration:U})):X("Wszystkie pola musz\u0105 by\u0107 wybrane.")},css:{marginTop:"1.25rem"},variant:"contained",children:"Dodaj wizyty"})]})]})})]})},ye=n(226),ke=n(180),Se=n.n(ke),ze=n(36),Ce=n(495),Ne=Object(E.a)({palette:{primary:{main:"#1976d2"}}},ye.b,ze.m),Re=[{field:"id",headerName:"Id",flex:1},{field:"firstName",headerName:"Imi\u0119",flex:1},{field:"lastName",headerName:"Nazwisko",flex:1},{field:"phone",headerName:"Telefon",flex:1},{field:"email",headerName:"E-mail",flex:1},{field:"job",headerName:"Zaw\xf3d",flex:1},{field:"remove",headerName:"Usu\u0144",renderCell:function(e){var t=Object(a.useState)(!1),n=Object(o.a)(t,2),i=n[0],r=n[1],c=Object(b.g)(),s=Object(d.useQueryClient)(),l=Object(a.useState)(!1),u=Object(o.a)(l,2),m=u[0],j=u[1],p=Object(a.useState)("success"),g=Object(o.a)(p,2),O=g[0],f=g[1],v=Object(a.useState)("Pomy\u015blnie zarejestrowano."),w=Object(o.a)(v,2),x=w[0],y=w[1],k=function(){j(!1)},S=Object(d.useMutation)((function(e){return console.log("HERERERERERERER "+e),P.a.delete("/specialist/".concat(e))}),{onSuccess:function(e){f("success"),j(!0),y("Pomy\u015blnie usuni\u0119to u\u017cytkownika."),s.invalidateQueries("specialists"),c.push("/specialists-list")},onError:function(e){f("error"),j(!0),y("Wyst\u0105pi\u0142 b\u0142\u0105d przy usuwaniu.")}});return Object(h.c)("strong",{css:{margin:"auto"},children:[Object(h.b)(Ce.a,{open:i,onClose:function(){return r(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(h.c)(H.a,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},children:[Object(h.b)(I.a,{css:{textAlign:"center"},id:"modal-modal-title",variant:"h6",component:"h2",children:"Czy na pewno chcesz usun\u0105\u0107 u\u017cytkownika?"}),Object(h.c)("div",{css:{textAlign:"center"},children:[Object(h.b)(R.a,{onClick:function(){return r(!1)},css:{":hover":{transform:"var(--tw-transform)",opacity:"0.8","--tw-bg-opacity":"1",backgroundColor:"rgba(37, 99, 235, var(--tw-bg-opacity))","--tw-scale-x":"1.05","--tw-scale-y":"1.05"},"--tw-bg-opacity":"1",backgroundColor:"rgba(37, 99, 235, var(--tw-bg-opacity))","--tw-text-opacity":"1",color:"rgba(255, 255, 255, var(--tw-text-opacity))",margin:"1.25rem"},children:"Nie"}),Object(h.b)(R.a,{onClick:function(){return S.mutate(e.id)},css:{":hover":{transform:"var(--tw-transform)",opacity:"0.8","--tw-bg-opacity":"1",backgroundColor:"rgba(220, 38, 38, var(--tw-bg-opacity))","--tw-scale-x":"1.05","--tw-scale-y":"1.05"},"--tw-bg-opacity":"1",backgroundColor:"rgba(220, 38, 38, var(--tw-bg-opacity))","--tw-text-opacity":"1",color:"rgba(255, 255, 255, var(--tw-text-opacity))",margin:"1.25rem"},children:"Tak"})]})]})}),Object(h.b)(q.a,{open:m,autoHideDuration:6e3,onClose:k,children:Object(h.b)(Q.a,{onClose:k,severity:O,sx:{width:"100%"},children:x})}),Object(h.b)("a",{css:{cursor:"pointer"},onClick:function(){r(!0)},children:Object(h.b)(Se.a,{css:{"--tw-text-opacity":"1",color:"rgba(239, 68, 68, var(--tw-text-opacity))"}})})]})},width:80,sortable:!1,align:"center"}],We=function(e){var t=e.rows;return Object(h.b)("div",{css:{maxWidth:"56rem",margin:"auto"},children:Object(h.b)(Y.a,{theme:Ne,children:Object(h.b)(ye.a,{disableColumnMenu:!0,disableExtendRowFullWidth:!0,rows:t,columns:Re,pageSize:20,rowsPerPageOptions:[20],disableSelectionOnClick:!0,autoHeight:!0})})})},Te=function(){var e=Object(a.useState)([{id:0}]),t=Object(o.a)(e,2),n=t[0],i=t[1],r=Object(d.useQuery)(["specialists"],(function(){return P.a.get("/specialists").then((function(e){return i(e.data.map((function(e){return{id:e.userId,firstName:e.user.firstName,lastName:e.user.lastName,phone:e.user.phone,email:e.user.email,job:le(e.jobName).name}}))),e.data}))}));r.data,r.isSuccess;return Object(h.c)(h.a,{children:[Object(h.b)(z,{}),Object(h.b)(We,{rows:n})]})},De=n(230),He=Object(E.a)();function Ae(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)("success"),s=Object(o.a)(c,2),l=s[0],u=s[1],m=Object(a.useState)("Pomy\u015blnie zarejestrowano."),p=Object(o.a)(m,2),h=p[0],g=p[1],O=Object(a.useState)(!1),f=Object(o.a)(O,1)[0],w=Object(b.g)(),x=(Object(a.useContext)(j),i.a.useState("doctor")),y=Object(o.a)(x,2),k=y[0],S=y[1],z=function(){r(!1)},C=Object(d.useMutation)((function(e){return P.a.post("/add-specialist",e)}),{onSuccess:function(e){w.push("/specialists-list")},onError:function(e){switch(u("error"),r(!0),e.request.status){case 400:g("Wszystkie pola musz\u0105 by\u0107 wype\u0142nione.");break;case 409:g("U\u017cytkownik o takim adresie email istnieje.");break;default:g("Wyst\u0105pi\u0142 b\u0142\u0105d przy tworzeniu konta specjalisty.")}}});return Object(_.jsxs)(Y.a,{theme:He,children:[f&&Object(_.jsx)(b.a,{to:{pathname:"/specialists",state:{showToast:!0}}}),Object(_.jsxs)(M.a,{component:"main",maxWidth:"xs",children:[Object(_.jsx)(q.a,{open:n,autoHideDuration:6e3,onClose:z,children:Object(_.jsx)(Q.a,{onClose:z,severity:l,sx:{width:"100%"},children:h})}),Object(_.jsxs)(H.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(_.jsx)(I.a,{component:"h1",variant:"h5",children:"Utw\xf3rz specjalist\u0119"}),Object(_.jsxs)(H.a,{component:"form",noValidate:!0,onSubmit:function(e){var t,n,a,i,r;e.preventDefault();var c=new FormData(e.currentTarget);C.mutate({email:(null===(t=c.get("email"))||void 0===t?void 0:t.toString())||"",password:(null===(n=c.get("password"))||void 0===n?void 0:n.toString())||"",firstName:(null===(a=c.get("firstName"))||void 0===a?void 0:a.toString())||"",lastName:(null===(i=c.get("lastName"))||void 0===i?void 0:i.toString())||"",phone:(null===(r=c.get("telephone"))||void 0===r?void 0:r.toString())||"",jobName:k||""})},sx:{mt:3},children:[Object(_.jsxs)(D.a,{container:!0,spacing:2,children:[Object(_.jsx)(D.a,{item:!0,xs:12,sm:6,children:Object(_.jsx)(W.a,{autoComplete:"given-name",name:"firstName",required:!0,fullWidth:!0,id:"firstName",label:"Imi\u0119",autoFocus:!0})}),Object(_.jsx)(D.a,{item:!0,xs:12,sm:6,children:Object(_.jsx)(W.a,{required:!0,fullWidth:!0,id:"lastName",label:"Nazwisko",name:"lastName",autoComplete:"family-name"})}),Object(_.jsx)(D.a,{item:!0,xs:12,children:Object(_.jsx)(W.a,{required:!0,fullWidth:!0,id:"email",label:"Adres email",name:"email",autoComplete:"email"})}),Object(_.jsx)(D.a,{item:!0,xs:12,children:Object(_.jsx)(W.a,{required:!0,fullWidth:!0,name:"telephone",label:"Telefon",id:"telephone",autoComplete:"telephone"})}),Object(_.jsx)(D.a,{item:!0,xs:12,children:Object(_.jsx)(W.a,{required:!0,fullWidth:!0,name:"password",label:"Has\u0142o",type:"password",id:"password",autoComplete:"new-password"})}),Object(_.jsxs)(D.a,{item:!0,xs:12,children:[Object(_.jsx)(De.a,{children:"Praca"}),Object(_.jsxs)(fe.a,{id:"job",required:!0,fullWidth:!0,value:k,onChange:function(e){S(e.target.value)},autoWidth:!0,children:[Object(_.jsx)(v.a,{value:"doctor",children:"Doktor"}),Object(_.jsx)(v.a,{value:"vet",children:"Weterynarz"}),Object(_.jsx)(v.a,{value:"dentist",children:"Dentysta"})]})]})]}),Object(_.jsx)(R.a,{disabled:C.isLoading,type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2,backgroundColor:n&&"success"===l?"green":"blue"},children:"Dodaj specjalist\u0119"})]})]})]})]})}var Le=function(){return Object(h.c)("div",{children:[Object(h.b)(z,{}),Object(h.b)(Ae,{})]})},Ie=n(23),Me=n(182),Ee=n.n(Me),Ye=n(181),_e=n.n(Ye),Be=n(124),Fe=n.n(Be),Pe=n(115),qe=n(493),Qe=n(513),Ue=n(514),Ze=n(503),Je=n(494),Ke=n(486),Ve=n(184),Xe=n.n(Ve),$e=function(e){switch(e){case 0:return"Niedziela";case 1:return"Poniedzia\u0142ek";case 2:return"Wtorek";case 3:return"\u015aroda";case 4:return"Czwartek";case 5:return"Pi\u0105tek";case 6:return"Sobota";default:return""}};var Ge=function(){var e=Object(d.useQueryClient)(),t=Object(a.useState)(0),n=Object(o.a)(t,2),i=n[0],r=n[1],c=Object(a.useState)(null),s=Object(o.a)(c,2),l=s[0],b=s[1],u=Object(a.useState)([]),m=Object(o.a)(u,2),j=m[0],p=m[1],g=Object(a.useState)(!1),O=Object(o.a)(g,2),f=O[0],v=O[1],w=Object(a.useState)("success"),x=Object(o.a)(w,2),y=x[0],k=x[1],S=Object(a.useState)(""),C=Object(o.a)(S,2),N=C[0],R=C[1],W=function(){v(!1)},T=Object(d.useQuery)(["specialist-visits",{offset:i}],(function(){return P.a.get("/specialist-vists/".concat(i)).then((function(e){for(var t={},n=1;n<7;n++)t[$e(n)]=[];return t.Niedziela=[],e.data.forEach((function(e){t[$e(we()(e.datetime_start).day())]=[].concat(Object(Ie.a)(t[$e(we()(e.datetime_start).day())]),[e])})),b(t),p(Array.from(Object.keys(t))),t}))}),{refetchInterval:5e4}),D=T.isFetching,H=T.isRefetching,A=Object(d.useMutation)((function(e){return P.a.post("/delete-reservation",e)}),{onSuccess:function(t){var n=t.data;e.invalidateQueries("specialist-visits"),console.log(JSON.stringify(n)),k("success"),v(!0),R(n)},onError:function(e){console.log(e.response.data.msg),k("error"),v(!0),R(e.response.data.msg)}}),L=Object(d.useMutation)((function(e){return P.a.post("/cancel-reservation",e)}),{onSuccess:function(t){var n=t.data;e.invalidateQueries("specialist-visits"),console.log(JSON.stringify(n)),k("success"),v(!0),R(n)},onError:function(e){console.log(e.response.data.msg),k("error"),v(!0),R(e.response.data.msg)}});return Object(h.c)("div",{children:[Object(h.b)(z,{}),Object(h.b)(q.a,{open:f,autoHideDuration:6e3,onClose:W,children:Object(h.b)(Q.a,{onClose:W,severity:y,sx:{width:"100%"},children:N})}),Object(h.c)("div",{css:{textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center"},children:[i>0&&Object(h.b)(Pe.a,{onClick:function(){return r(i-1)},children:Object(h.b)(_e.a,{})}),Object(h.b)("p",{css:{textAlign:"center",fontSize:"1.875rem",lineHeight:"2.25rem",fontWeight:"700"},children:"Rezerwacje"}),Object(h.b)(Pe.a,{onClick:function(){return r(i+1)},children:Object(h.b)(Ee.a,{})})]}),Object(h.b)("div",{css:{maxWidth:"36rem",margin:"auto",marginTop:"1.25rem"},children:(!D||H)&&(null===j||void 0===j?void 0:j.length)>0&&j.map((function(e,t){var n,a;return(null===(n=l[e])||void 0===n?void 0:n.length)>0&&Object(h.c)(qe.a,{css:{margin:"auto","--tw-shadow":"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",boxShadow:"var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)",marginBottom:"0.25rem",marginRight:"1.25rem",marginLeft:"1.25rem"},children:[Object(h.b)(Qe.a,{expandIcon:Object(h.b)(Xe.a,{}),children:Object(h.c)("div",{children:[Object(h.b)(I.a,{sx:{fontWeight:"bold",fontSize:20},children:e+" - "+we()(null===(a=l[e][0])||void 0===a?void 0:a.datetime_start).format("DD.MM.YYYY").toString()}),l[e].filter((function(e){return"free"===e.reservation_status})).length>0&&Object(h.c)(I.a,{sx:{color:"green"},children:["Wolne wizyty",": ",l[e].filter((function(e){return"free"===e.reservation_status})).length]}),l[e].filter((function(e){return"reserved"===e.reservation_status})).length>0&&Object(h.c)(I.a,{sx:{color:"red"},children:["Zarezerwowane wizyty",": ",l[e].filter((function(e){return"reserved"===e.reservation_status})).length," "]}),Object(h.c)(I.a,{sx:{color:"blue"},children:["Wszystkie wizyty: ",l[e].length," "]})]})}),Object(h.b)(Ue.a,{css:{marginTop:"0px"},children:Object(h.b)(Ze.a,{sx:{width:"100%",bgcolor:"background.paper"},children:l[e].map((function(e,t){return Object(h.b)(Je.a,{css:{borderBottomWidth:"2px"},secondaryAction:Object(h.c)(h.a,{children:["reserved"===e.reservation_status&&Object(h.b)(Pe.a,{onClick:function(){return L.mutate({id:e.id})},children:Object(h.b)(Fe.a,{})}),Object(h.b)(Pe.a,{onClick:function(){return A.mutate({id:e.id})},children:Object(h.b)(Se.a,{})})]}),children:Object(h.b)(Ke.a,{secondaryTypographyProps:{color:"red"},primary:we()(e.datetime_start).format("DD.MM.YYYY").toString()+" - "+we()(e.datetime_start).format("HH:mm")+"-"+we()(e.datetime_end).format("HH:mm"),secondary:(null===e||void 0===e?void 0:e.user)?(null===e||void 0===e?void 0:e.user.firstName)+" "+(null===e||void 0===e?void 0:e.user.lastName)+" - "+(null===e||void 0===e?void 0:e.user.phone)+" - "+(null===e||void 0===e?void 0:e.user.email)+" - "+we()(null===e||void 0===e?void 0:e.timestamp).format("DD.MM.YYYY")+" - "+we()(null===e||void 0===e?void 0:e.timestamp).format("HH:mm"):""})},t)}))})})]},t)}))})]})};var et=function(){var e=Object(d.useQueryClient)(),t=Object(a.useState)(!1),n=Object(o.a)(t,2),i=n[0],r=n[1],c=Object(a.useState)("success"),s=Object(o.a)(c,2),l=s[0],b=s[1],u=Object(a.useState)(""),m=Object(o.a)(u,2),j=m[0],p=m[1],g=Object(a.useState)(null),f=Object(o.a)(g,2),v=f[0],w=f[1],x=Object(a.useState)(null),y=Object(o.a)(x,2),k=y[0],S=y[1],C=Object(a.useState)(""),N=Object(o.a)(C,2),T=N[0],D=N[1],H=function(){r(!1)},A=Object(d.useMutation)((function(e){return P.a.post("/delete-reservation-from-to",e)}),{onSuccess:function(t){var n=t.data;e.invalidateQueries("specialist-visits"),console.log(JSON.stringify(n)),b("success"),r(!0),p(n)},onError:function(e){console.log(e.response.data.msg),b("error"),r(!0),p(e.response.data.msg)}});return Object(h.c)("div",{children:[Object(h.b)(z,{}),Object(h.b)(q.a,{open:i,autoHideDuration:6e3,onClose:H,children:Object(h.b)(Q.a,{onClose:H,severity:l,sx:{width:"100%"},children:j})}),Object(h.b)("p",{css:{textAlign:"center",fontSize:"1.875rem",lineHeight:"2.25rem",fontWeight:"700",paddingBottom:"2.5rem"},children:"Usuwanie wizyt"}),Object(h.b)("div",{css:{paddingBottom:"0.5rem",marginLeft:"0.5rem",marginRight:"0.5rem"},children:Object(h.c)(he.b,{dateAdapter:pe.a,locale:ge.a,children:[Object(h.c)("div",{css:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",paddingLeft:"1rem",paddingRight:"1rem",paddingTop:"0.5rem",paddingBottom:"0.5rem"},children:[Object(h.b)("div",{css:{paddingRight:"0.25rem",textAlign:"right"},children:Object(h.b)(je.a,{label:"Data pocz\u0105tkowa",value:v,onChange:function(e){w(e)},renderInput:function(e){return Object(h.b)(W.a,Object(O.a)({},e))}})}),Object(h.b)("div",{css:{paddingLeft:"0.25rem",textAlign:"left"},children:Object(h.b)(je.a,{label:"Data ko\u0144cowa",value:k,onChange:function(e){S(e)},renderInput:function(e){return Object(h.b)(W.a,Object(O.a)({},e))}})})]}),Object(h.c)("div",{css:{textAlign:"center"},children:[T&&Object(h.b)("p",{css:{"--tw-text-opacity":"1",color:"rgba(220, 38, 38, var(--tw-text-opacity))"},children:T}),Object(h.b)(R.a,{onClick:function(){v&&k?we()(v)>=we()(k)?D("Data pocz\u0105tku usuwania wizyt musi by\u0107 p\xf3\u017aniejsza od daty ko\u0144ca wizyt."):(D(""),A.mutate({date_start:v,date_end:k})):D("Wszystkie pola musz\u0105 by\u0107 wybrane.")},css:{marginTop:"1.25rem"},variant:"contained",children:"Usu\u0144 wizyty"})]})]})})]})},tt=n(297),nt=n.n(tt);var at=function(e){var t=Object(a.useContext)(j);console.log("HERE: "+e.match.params.id);var n=Object(d.useQueryClient)(),i=Object(a.useState)(0),r=Object(o.a)(i,2),c=r[0],s=r[1],l=Object(a.useState)(null),b=Object(o.a)(l,2),u=b[0],m=b[1],p=Object(a.useState)([]),g=Object(o.a)(p,2),O=g[0],f=g[1],v=Object(a.useState)(!1),w=Object(o.a)(v,2),x=w[0],y=w[1],k=Object(a.useState)("success"),S=Object(o.a)(k,2),C=S[0],N=S[1],R=Object(a.useState)(""),W=Object(o.a)(R,2),T=W[0],D=W[1],H=function(){y(!1)},A=Object(d.useQuery)(["specialist-visits",{offset:c,id:e.match.params.id}],(function(){return P.a.get("/week-reservation/".concat(e.match.params.id,"/").concat(c)).then((function(e){for(var t={},n=1;n<7;n++)t[$e(n)]=[];return t.Niedziela=[],e.data.forEach((function(e){t[$e(we()(e.datetime_start).day())]=[].concat(Object(Ie.a)(t[$e(we()(e.datetime_start).day())]),[e])})),m(t),f(Array.from(Object.keys(t))),t}))}),{refetchInterval:5e4}),L=A.isFetching,M=A.isRefetching,E=Object(d.useMutation)((function(e){return P.a.put("/reserve",e)}),{onSuccess:function(e){var t=e.data;n.invalidateQueries("specialist-visits"),console.log(JSON.stringify(t)),N("success"),y(!0),D(t)},onError:function(e){console.log(e.response.data.msg),N("error"),y(!0),D(e.response.data.msg)}}),Y=Object(d.useMutation)((function(e){return P.a.put("/cancel-user-reservation",e)}),{onSuccess:function(e){var t=e.data;n.invalidateQueries("specialist-visits"),console.log(JSON.stringify(t)),N("success"),y(!0),D(t)},onError:function(e){console.log(e.response.data.msg),N("error"),y(!0),D(e.response.data.msg)}});return Object(h.c)("div",{children:[Object(h.b)(z,{}),Object(h.b)(q.a,{open:x,autoHideDuration:6e3,onClose:H,children:Object(h.b)(Q.a,{onClose:H,severity:C,sx:{width:"100%"},children:T})}),Object(h.c)("div",{css:{textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center"},children:[c>0&&Object(h.b)(Pe.a,{onClick:function(){return s(c-1)},children:Object(h.b)(_e.a,{})}),Object(h.b)("p",{css:{textAlign:"center",fontSize:"1.875rem",lineHeight:"2.25rem",fontWeight:"700"},children:"Rezerwacje - widok u\u017cytkownika"}),Object(h.b)(Pe.a,{onClick:function(){return s(c+1)},children:Object(h.b)(Ee.a,{})})]}),Object(h.b)("div",{css:{maxWidth:"36rem",margin:"auto",marginTop:"1.25rem"},children:(!L||M)&&(null===O||void 0===O?void 0:O.length)>0&&O.map((function(e,n){var a,i;return(null===(a=u[e])||void 0===a?void 0:a.length)>0&&Object(h.c)(qe.a,{css:{margin:"auto","--tw-shadow":"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",boxShadow:"var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)",marginBottom:"0.25rem",marginRight:"1.25rem",marginLeft:"1.25rem"},children:[Object(h.b)(Qe.a,{expandIcon:Object(h.b)(Xe.a,{}),children:Object(h.c)("div",{children:[Object(h.b)(I.a,{sx:{fontWeight:"bold",fontSize:20},children:e+" - "+we()(null===(i=u[e][0])||void 0===i?void 0:i.datetime_start).format("DD.MM.YYYY").toString()}),u[e].filter((function(e){return"free"===e.reservation_status})).length>0&&Object(h.c)(I.a,{sx:{color:"green"},children:["Wolne wizyty",": ",u[e].filter((function(e){return"free"===e.reservation_status})).length]}),u[e].filter((function(e){return"reserved"===e.reservation_status})).length>0&&Object(h.c)(I.a,{sx:{color:"red"},children:["Zarezerwowane wizyty",": ",u[e].filter((function(e){return"reserved"===e.reservation_status})).length," "]}),Object(h.c)(I.a,{sx:{color:"blue"},children:["Wszystkie wizyty: ",u[e].length," "]})]})}),Object(h.b)(Ue.a,{css:{marginTop:"0px"},children:Object(h.b)(Ze.a,{sx:{width:"100%",bgcolor:"background.paper"},children:u[e].map((function(e,n){return Object(h.b)(Je.a,{css:{borderBottomWidth:"2px"},secondaryAction:Object(h.b)(h.a,{children:e.client_id===t.user.id?Object(h.c)(Pe.a,{onClick:function(){return Y.mutate({id:e.id})},children:["Anuluj",Object(h.b)(Fe.a,{})]}):e.client_id?"Zarezerwowane":Object(h.c)(Pe.a,{onClick:function(){return E.mutate({id:e.id})},children:["Rezerwuj",Object(h.b)(nt.a,{})]})}),children:Object(h.b)(Ke.a,{secondaryTypographyProps:{color:"red"},primary:we()(e.datetime_start).format("DD.MM.YYYY").toString()+" - "+we()(e.datetime_start).format("HH:mm")+"-"+we()(e.datetime_end).format("HH:mm"),secondary:e.client_id===t.user.id&&"Zarezerwowane przez ciebie"})},n)}))})})]},n)}))})]})};var it,rt=function(){var e=Object(d.useQueryClient)(),t=Object(a.useState)(!1),n=Object(o.a)(t,2),i=n[0],r=n[1],c=Object(a.useState)("success"),s=Object(o.a)(c,2),l=s[0],b=s[1],u=Object(a.useState)(""),m=Object(o.a)(u,2),j=m[0],p=m[1],g=function(){r(!1)},O=Object(d.useQuery)("all-user-reservations",(function(){return P.a.get("/all-user-reservations").then((function(e){return console.log(JSON.stringify(e.data)),e.data}))})).data,f=Object(d.useMutation)((function(e){return P.a.put("/cancel-user-reservation",e)}),{onSuccess:function(t){var n=t.data;e.invalidateQueries("all-user-reservations"),console.log(JSON.stringify(n)),b("success"),r(!0),p(n)},onError:function(e){console.log(e.response.data.msg),b("error"),r(!0),p(e.response.data.msg)}});return Object(h.c)("div",{children:[Object(h.b)(q.a,{open:i,autoHideDuration:6e3,onClose:g,children:Object(h.b)(Q.a,{onClose:g,severity:l,sx:{width:"100%"},children:j})}),Object(h.b)(z,{}),Object(h.b)("p",{css:{textAlign:"center",fontSize:"1.875rem",lineHeight:"2.25rem",fontWeight:"700",paddingBottom:"2.5rem"},children:"Rezerwacje u\u017cytkownika"}),Object(h.c)(Ze.a,{css:{maxWidth:"36rem",margin:"auto"},sx:{width:"100%",bgcolor:"background.paper"},children:[0===(null===O||void 0===O?void 0:O.length)&&Object(h.b)("p",{css:{textAlign:"center"},children:"Aktualnie u\u017cytkownik nie posiada rezerwacji."}),null===O||void 0===O?void 0:O.map((function(e,t){return Object(h.b)(Je.a,{css:{borderBottomWidth:"2px"},secondaryAction:Object(h.b)(h.a,{children:"reserved"===e.reservation_status&&Object(h.b)(Pe.a,{onClick:function(){return f.mutate({id:e.id})},children:Object(h.b)(Fe.a,{})})}),children:Object(h.b)(Ke.a,{secondaryTypographyProps:{color:"red"},primary:we()(e.datetime_start).format("DD.MM.YYYY").toString()+" - "+we()(e.datetime_start).format("HH:mm")+"-"+we()(e.datetime_end).format("HH:mm")+"  -  "+e.user.firstName+" "+e.user.lastName,secondary:(null===e||void 0===e?void 0:e.user)?"Zarezerwowane dnia  "+we()(null===e||void 0===e?void 0:e.timestamp).format("DD.MM.YYYY")+" o godzinie "+we()(null===e||void 0===e?void 0:e.timestamp).format("HH:mm"):""})},t)}))]})]})},ct=function(){return Object(_.jsx)(p.b,{children:Object(_.jsxs)(b.d,{children:[Object(_.jsx)(b.b,{path:"/",component:C,exact:!0}),Object(_.jsx)(b.b,{path:"/login",component:J,exact:!0}),Object(_.jsx)(b.b,{path:"/register",component:ee,exact:!0}),Object(_.jsx)(b.b,{path:"/unauthorized",component:me,exact:!0}),Object(_.jsx)(b.b,{path:"/specialists",component:ue,exact:!0}),Object(_.jsx)(b.b,{path:"/specialist-visits/:id",component:at,exact:!0}),Object(_.jsx)(b.b,{path:"/logout",component:V,exact:!0}),Object(_.jsx)(b.b,{path:"/user-reservations",component:rt,exact:!0}),Object(_.jsx)(b.b,{path:"/add-visit",component:xe,exact:!0}),Object(_.jsx)(b.b,{path:"/show-visits",component:Ge,exact:!0}),Object(_.jsx)(b.b,{path:"/specialists-list",component:Te,exact:!0}),Object(_.jsx)(b.b,{path:"/delete-visits",component:et,exact:!0}),Object(_.jsx)(b.b,{path:"/owner",component:$,exact:!0}),Object(_.jsx)(b.b,{path:"/specialist-add",component:Le,exact:!0})]})})},ot=n(123),st=function(){var e=Object(a.useContext)(j),t=localStorage.getItem("token");return Object(d.useQuery)("context-fill",(function(){return P.a.get("/user-by-token").then((function(n){n&&(null===n||void 0===n?void 0:n.data)&&t&&e.setUser(n.data)}))}),{enabled:!!t}),Object(_.jsx)("div",{})},lt=function(){return Object(_.jsx)(l.a,{styles:Object(l.b)(it||(it=Object(s.a)(['*, ::before, ::after {\nbox-sizing: border-box;\nborder-width: 0;\nborder-style: solid;\n--tw-border-opacity: 1;\nborder-color: rgba(229, 231, 235, var(--tw-border-opacity));\n--tw-translate-x: 0;\n--tw-translate-y: 0;\n--tw-rotate: 0;\n--tw-skew-x: 0;\n--tw-skew-y: 0;\n--tw-scale-x: 1;\n--tw-scale-y: 1;\n--tw-transform: translateX(var(--tw-translate-x)) translateY(var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));\n--tw-ring-inset: var(--tw-empty,/*!*/ /*!*/);\n--tw-ring-offset-width: 0px;\n--tw-ring-offset-color: #fff;\n--tw-ring-color: rgba(59, 130, 246, 0.5);\n--tw-ring-offset-shadow: 0 0 #0000;\n--tw-ring-shadow: 0 0 #0000;\n--tw-shadow: 0 0 #0000;\n--tw-blur: var(--tw-empty,/*!*/ /*!*/);\n--tw-brightness: var(--tw-empty,/*!*/ /*!*/);\n--tw-contrast: var(--tw-empty,/*!*/ /*!*/);\n--tw-grayscale: var(--tw-empty,/*!*/ /*!*/);\n--tw-hue-rotate: var(--tw-empty,/*!*/ /*!*/);\n--tw-invert: var(--tw-empty,/*!*/ /*!*/);\n--tw-saturate: var(--tw-empty,/*!*/ /*!*/);\n--tw-sepia: var(--tw-empty,/*!*/ /*!*/);\n--tw-drop-shadow: var(--tw-empty,/*!*/ /*!*/);\n--tw-filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);\n--tw-backdrop-blur: var(--tw-empty,/*!*/ /*!*/);\n--tw-backdrop-brightness: var(--tw-empty,/*!*/ /*!*/);\n--tw-backdrop-contrast: var(--tw-empty,/*!*/ /*!*/);\n--tw-backdrop-grayscale: var(--tw-empty,/*!*/ /*!*/);\n--tw-backdrop-hue-rotate: var(--tw-empty,/*!*/ /*!*/);\n--tw-backdrop-invert: var(--tw-empty,/*!*/ /*!*/);\n--tw-backdrop-opacity: var(--tw-empty,/*!*/ /*!*/);\n--tw-backdrop-saturate: var(--tw-empty,/*!*/ /*!*/);\n--tw-backdrop-sepia: var(--tw-empty,/*!*/ /*!*/);\n--tw-backdrop-filter: var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);\n        }\nhtml {\nline-height: 1.5;\n-webkit-text-size-adjust: 100%;\n-moz-tab-size: 4;\ntab-size: 4;\nfont-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";\n        }\nbody {\nmargin: 0;\nfont-family: inherit;\nline-height: inherit;\n        }\nhr {\nheight: 0;\ncolor: inherit;\nborder-top-width: 1px;\n        }\nabbr[title] {\ntext-decoration: underline dotted;\n        }\nb, strong {\nfont-weight: bolder;\n        }\ncode, kbd, samp, pre {\nfont-family: ui-monospace, SFMono-Regular, Consolas, \'Liberation Mono\', Menlo, monospace;\nfont-size: 1em;\n        }\nsmall {\nfont-size: 80%;\n        }\nsub, sup {\nfont-size: 75%;\nline-height: 0;\nposition: relative;\nvertical-align: baseline;\n        }\nsub {\nbottom: -0.25em;\n        }\nsup {\ntop: -0.5em;\n        }\ntable {\ntext-indent: 0;\nborder-color: inherit;\nborder-collapse: collapse;\n        }\nbutton, input, optgroup, select, textarea {\nfont-family: inherit;\nfont-size: 100%;\nline-height: inherit;\nmargin: 0;\npadding: 0;\ncolor: inherit;\n        }\nbutton, select {\ntext-transform: none;\n        }\nbutton, [type=\'button\'], [type=\'reset\'], [type=\'submit\'] {\n-webkit-appearance: button;\n        }\n::-moz-focus-inner {\nborder-style: none;\npadding: 0;\n        }\n:-moz-focusring {\noutline: 1px dotted ButtonText;\n        }\n:-moz-ui-invalid {\nbox-shadow: none;\n        }\nlegend {\npadding: 0;\n        }\nprogress {\nvertical-align: baseline;\n        }\n::-webkit-inner-spin-button, ::-webkit-outer-spin-button {\nheight: auto;\n        }\n[type=\'search\'] {\n-webkit-appearance: textfield;\noutline-offset: -2px;\n        }\n::-webkit-search-decoration {\n-webkit-appearance: none;\n        }\n::-webkit-file-upload-button {\n-webkit-appearance: button;\nfont: inherit;\n        }\nsummary {\ndisplay: list-item;\n        }\nblockquote, dl, dd, h1, h2, h3, h4, h5, h6, hr, figure, p, pre {\nmargin: 0;\n        }\nbutton {\nbackground-color: transparent;\nbackground-image: none;\n        }\nfieldset {\nmargin: 0;\npadding: 0;\n        }\nol, ul {\nlist-style: none;\nmargin: 0;\npadding: 0;\n        }\nimg {\nborder-style: solid;\n        }\ntextarea {\nresize: vertical;\n        }\ninput::placeholder, textarea::placeholder {\ncolor: #9ca3af;\n        }\nbutton, [role="button"] {\ncursor: pointer;\n        }\nh1, h2, h3, h4, h5, h6 {\nfont-size: inherit;\nfont-weight: inherit;\n        }\na {\ncolor: inherit;\ntext-decoration: inherit;\n        }\npre, code, kbd, samp {\nfont-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;\n        }\nimg, svg, video, canvas, audio, iframe, embed, object {\ndisplay: block;\nvertical-align: middle;\n        }\nimg, video {\nmax-width: 100%;\nheight: auto;\n        }\n[hidden] {\ndisplay: none;\n        }\n@keyframes spin {\nto {\ntransform: rotate(360deg);\n        }\n        }\n@keyframes ping {\n75%, 100% {\ntransform: scale(2);\nopacity: 0;\n        }\n        }\n@keyframes pulse {\n50% {\nopacity: .5;\n        }\n        }\n@keyframes bounce {\n0%, 100% {\ntransform: translateY(-25%);\nanimation-timing-function: cubic-bezier(0.8,0,1,1);\n        }\n50% {\ntransform: none;\nanimation-timing-function: cubic-bezier(0,0,0.2,1);\n        }\n        }'])))})},dt=new d.QueryClient;var bt=function(){var e=Object(a.useState)(u),t=Object(o.a)(e,2),n=t[0],i=t[1];return Object(_.jsx)(p.a,{children:Object(_.jsx)(d.QueryClientProvider,{client:dt,children:Object(_.jsx)(ot.a,{colors:["red","green"],children:Object(_.jsx)("main",{children:Object(_.jsxs)(j.Provider,{value:{user:n,setUser:i},children:[Object(_.jsx)(st,{}),Object(_.jsx)(lt,{}),Object(_.jsx)(ct,{})]})})})})})};P.a.defaults.baseURL="https://projektkam.pl/",P.a.interceptors.response.use((function(e){return e}),(function(e){return e&&e.request&&403===e.request.status&&(console.log("Forbidden."),window.location.href="https://projektkam.pl/unauthorized"),Promise.reject(e)})),P.a.interceptors.request.use((function(e){var t=localStorage.getItem("token");return e&&e.headers&&(e.headers.Authorization=t||""),e}));n(413);c.a.render(Object(_.jsx)(p.a,{children:Object(_.jsx)(bt,{})}),document.getElementById("root"))}},[[414,1,2]]]);
//# sourceMappingURL=main.2d90f753.chunk.js.map